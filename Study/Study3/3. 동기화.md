# 프로세스 동기화 (Process Synchronization)

## 1. 개요

프로세스 동기화란 **여러 프로세스(또는 쓰레드)가 공유 자원에 동시에 접근할 때, 데이터의 일관성과 정합성을 유지하기 위한 기법**이다.
운영체제는 이러한 충돌을 방지하기 위해 다양한 동기화 도구를 제공한다.

---

## 2. 동기화가 필요한 이유

- 공유 자원(파일, 변수, 메모리 등)에 동시에 접근 시 **경쟁 조건(Race Condition)** 발생 가능
- 실행 순서에 따라 결과가 달라짐 → **비결정성(Nondeterminism)**
- 데이터 오염(Corruption), 무한 루프, 충돌 등을 방지

---

## 3. 경쟁 조건 (Race Condition)

- 둘 이상의 프로세스가 **동시에 공유 자원을 접근/수정**하려 할 때 발생
- 실행 순서에 따라 프로그램의 실행 결과가 달라질 수 있음
- 예시: 은행 계좌 잔액 업데이트, 티켓 예약 시스템

---

## 4. 상호 배제 (Mutual Exclusion)

**두 개 이상의 프로세스가 동시에 공유 자원에 접근하지 못하도록 제한하는 조건**

### 임계 구역(Critical Section)

- 공유 자원에 접근하는 코드 영역
- 하나의 프로세스만 이 영역을 실행할 수 있어야 함

---

## 5. 동기화 구현 방식

### 1) 세마포어 (Semaphore)

- **정수형 변수**로, 접근 가능한 자원의 개수를 나타냄
- P (wait) 연산: 자원을 요청하고 감소
- V (signal) 연산: 자원을 반환하고 증가

#### 예시 (Python)

```python
from multiprocessing import Process, Semaphore, Value

def task(sem, counter):
    for _ in range(100):
        sem.acquire()
        counter.value += 1
        sem.release()

if __name__ == "__main__":
    sem = Semaphore(1)
    counter = Value('i', 0)
    processes = [Process(target=task, args=(sem, counter)) for _ in range(5)]

    for p in processes: p.start()
    for p in processes: p.join()

    print("Final counter:", counter.value)
