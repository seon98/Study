# 식사하는 철학자 문제 (The Dining Philosophers Problem)

## 서론: 왜 이 문제가 중요한가?

운영체제에서 **데드락(Deadlock, 교착상태)**은 여러 프로세스가 자원을 점유한 채 서로의 해제를 기다리며 **무한 대기**에 빠지는 상태를 말합니다. 이 추상적인 개념을 설명하기 위해 고안된 대표적 비유가 바로 **“식사하는 철학자 문제”**입니다.

---

## 문제의 구성

- 5명의 철학자가 원형 탁자에 앉아 있음
- 철학자 사이에는 **하나씩 포크(fork)**가 놓여 있음 (총 5개)
- 각 철학자는 다음 두 가지 행동을 반복함:
  1. **생각한다**
  2. **배가 고프면 식사를 시도한다**
- 식사를 하기 위해서는 **왼쪽과 오른쪽 포크 두 개**가 모두 필요함
- 포크는 **철학자 사이에 공유된 자원**

---

## 데드락이 발생하는 상황

1. 모든 철학자가 동시에 **왼쪽 포크를 집는다**
2. 모두 오른쪽 포크를 기다리게 됨
3. 하지만 오른쪽 포크는 이웃 철학자가 이미 점유 중이므로 아무도 두 개의 포크를 완전히 얻을 수 없음
4. **누구도 식사하지 못하고 서로를 기다리기만 하는 교착상태 발생**

---

## 데드락 발생 조건과의 매핑

| 데드락 조건 | 철학자 문제에서의 예시 |
|-------------|-------------------------|
| **상호 배제** (Mutual Exclusion) | 포크는 한 번에 한 명만 사용할 수 있음 |
| **점유 대기** (Hold and Wait) | 포크 하나를 점유한 채 나머지를 기다림 |
| **비선점** (No Preemption) | 다른 철학자의 포크를 강제로 빼앗을 수 없음 |
| **순환 대기** (Circular Wait) | 철학자들이 원형으로 서로의 포크를 기다림 |

→ 이 네 가지 조건이 모두 만족되면 **데드락이 발생**함

---

## 해결 방안

### 1. 순서 강제 부여

- 철학자들이 **번호 순서대로 포크를 집도록 제한**
- 자원 요청에 **전역적인 순서 규칙 적용**

### 2. 자원 점유 제한

- **최대 4명까지만** 식사를 시도할 수 있도록 제한
- 병렬성 감소의 대가로 데드락 회피

### 3. 비대칭 전략

- **홀수 철학자**는 왼쪽 → 오른쪽 순서로
- **짝수 철학자**는 오른쪽 → 왼쪽 순서로 포크를 집게 함

### 4. 세마포어(Semaphore)

- 각 포크에 대해 세마포어를 적용해 **자원 접근을 동기화**

### 5. 모니터(Monitor)

- 철학자의 상태(`thinking`, `hungry`, `eating`)를 추적하여 포크 할당을 **중앙에서 제어**

---

## 이 문제가 중요한 이유

| 요소 | 대응 |
|------|------|
| 철학자 | 프로세스 |
| 포크 | 공유 자원 (파일, 메모리, 프린터 등) |
| 식사 | 자원 점유 후 작업 수행 |

- 실제 멀티스레딩 환경이나 트랜잭션 시스템 등에서 자원 관리 전략을 설계할 때 필수적으로 고려해야 할 문제
- 동기화, 교착상태 회피, 병렬성 조절 등에 대한 **이론적 기반 제공**

---

## 참고 자료

- Silberschatz, Galvin, Gagne. *Operating System Concepts*
- Wikipedia: [Dining Philosophers Problem](https://en.wikipedia.org/wiki/Dining_philosophers_problem)
- GeeksForGeeks: [Dining Philosophers - OS](https://www.geeksforgeeks.org/dining-philosopher-problem-operating-system/)
