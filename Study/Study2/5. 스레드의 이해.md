# 스레드의 이해 (Understanding Threads)

## 스레드란?

> 프로세스 내에서 실행되는 **최소 실행 단위**
스레드는 하나의 프로세스 안에서 실행되며, 프로세스의 자원(Code, Data, Heap 등)을 **공유**한다.
프로세스는 최소 1개의 스레드를 가지며, 이 기본 스레드를 **메인 스레드**라고 부른다.

---

## 프로세스 vs 스레드

| 항목 | 프로세스(Process) | 스레드(Thread) |
|------|--------------------|----------------|
| 정의 | 실행 중인 프로그램 | 프로세스 내 실행 단위 |
| 메모리 | 독립된 주소 공간 | 주소 공간 공유 (Code, Data, Heap) |
| 통신 | IPC 필요 (복잡) | 공유 메모리로 간단 |
| 생성 비용 | 높음 (OS 자원 할당 필요) | 낮음 (자원 공유) |
| 안정성 | 다른 프로세스에 영향 없음 | 한 스레드 오류 → 전체 프로세스 영향 |
| 예시 | 워드프로세스, 브라우저 | 문서 자동저장 스레드, 렌더링 스레드 등 |

---

## 스레드 구성 요소

- **스레드 ID (TID)**: 고유 식별자
- **프로그램 카운터 (PC)**: 다음 실행 명령어 위치
- **레지스터 집합**: 현재 작업에 필요한 상태 정보
- **스택(Stack)**: 함수 호출 시 지역 변수 저장
- → 나머지 영역은 **프로세스 내 다른 스레드와 공유**

---

## 멀티스레딩(Multithreading)

하나의 프로세스 안에서 여러 스레드를 동시 실행시켜
**자원 소비는 줄이고, 작업 병렬화**를 가능하게 함.

### 장점

- 자원 공유로 **효율적**
- 생성/소멸 비용 낮음
- 병렬 처리에 유리함 (멀티코어 CPU 활용)

### 단점

- 스레드 간 **경쟁 조건(Race Condition)** 발생 가능
- **동기화(Synchronization)** 필수 (Lock, Semaphore 등)
- 한 스레드 오류 시 전체 프로세스가 종료될 수 있음

---

## 사용자 스레드 vs 커널 스레드

| 항목 | 사용자 스레드 (User-Level) | 커널 스레드 (Kernel-Level) |
|------|-----------------------------|------------------------------|
| 관리 주체 | 사용자 라이브러리 (예: pthread) | 커널(OS) |
| 컨텍스트 스위칭 | 빠름 | 느림 (커널 호출 필요) |
| 병렬 실행 | X (단일 코어에서만 실행됨) | O (멀티코어 가능) |
| 예시 | Green threads, Java Thread | Linux, Windows Thread |

---

## 예시 코드

### Python `threading` 예시

```python
import threading

def worker():
    print("스레드 작업 실행 중...")

threads = []
for i in range(3):
    t = threading.Thread(target=worker)
    threads.append(t)
    t.start()

for t in threads:
    t.join()
